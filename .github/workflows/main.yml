name: Mirror Repository on Push

on:
  push:
    branches:
      - main

jobs:
  mirror:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Mirror repository to mirror_test
      env:
        TARGET_REPO: 'MirandO98/mirror_test' # Replace YOUR_USERNAME with your actual GitHub username
        TARGET_BRANCH: 'main'
        SOURCE_DIR: '.' # Current directory
        PAT: ${{ secrets.MIRROR_REPO_TOKEN }} # Use the PAT you stored as a secret
      run: |
        git config --global user.email "osmanimirand@gmail.com" # Replace with your email
        git config --global user.name "Mirand Osmani" # Replace with your name
        git remote add target https://${PAT}@github.com/${TARGET_REPO}.git
        git push target HEAD:${TARGET_BRANCH} --force
